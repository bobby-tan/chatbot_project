# -----------------------------------------------------
# 1. Base Image
# -----------------------------------------------------
FROM node:20-slim

# -----------------------------------------------------
# 2. Install git
# -----------------------------------------------------
RUN apt-get update && \
    apt-get install -y git && \
    apt-get clean && rm -rf /var/lib/apt/lists/*

# -----------------------------------------------------
# 3. Clone your GitHub repo
# -----------------------------------------------------
WORKDIR /app
RUN git clone https://github.com/bobby-tan/chatbot_project .

# -----------------------------------------------------
# 4. Go into the frontend folder
# -----------------------------------------------------
WORKDIR /app/chatbot-frontend

# -----------------------------------------------------
# 5. Install frontend dependencies
# -----------------------------------------------------
RUN npm install

# -----------------------------------------------------
# 6. Expose Vite dev server port
# -----------------------------------------------------
EXPOSE 5173

# -----------------------------------------------------
# 7. Start Vite dev server
# -----------------------------------------------------
CMD ["npm", "run", "dev", "--", "--host", "0.0.0.0", "--port", "5173"]
